<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./predlozak.xhtml">

            <ui:define name="naslov">
                NWTiS - Pregled parkirališta i prognoza vremena
            </ui:define>
            <ui:define name="top">
                NWTiS - Pregled parkirališta i prognoza vremena
            </ui:define>
            <ui:define name="content">
                <h:form>
                    <div class="row">
                        <div class="col-md-1 col-md-offset-1 form-group">
                            <h:outputLabel class="control-label" value="ID:">

                            </h:outputLabel>
                        </div>
                        <div class="col-md-2  form-group" rendered="">
                            <h:inputText  class="form-control"  id = "id" value="#{pregled.id}"></h:inputText>
                        </div>
                        <div class="col-md-2 form-group" rendered="">
                            <h:commandButton  type="button" class="btn-primary btn col-md-12" style="height: 35px" value="Dodaj" action="#{pregled.dodajParkiraliste()}" onclick="closeMessage()">
                                <f:ajax execute="id naziv adresa" render="selecBoxRaspoloziva selecBoxOdabrana id naziv adresa messages insertBtn"></f:ajax>

                            </h:commandButton> 
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-1 col-md-offset-1 form-group">
                            <h:outputLabel class="control-label" value="Naziv:">
                            </h:outputLabel>
                        </div>
                        <div class="col-md-2  form-group" rendered="">
                            <h:inputText class="form-control" id = "naziv" value="#{pregled.naziv}"></h:inputText>
                        </div>
                        <div class="col-md-2 form-group" rendered="">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-1 col-md-offset-1 form-group">
                            <h:outputLabel class="control-label" value="Adresa:">
                            </h:outputLabel>
                        </div>
                        <div class="col-md-2  form-group" rendered="">
                            <h:inputText class="form-control" id = "adresa" value="#{pregled.adresa}"></h:inputText>
                        </div>
                        <div class="col-md-2 form-group" rendered="">

                            <h:commandButton onclick="closeMessage()" id = "insertBtn" style="height: 35px; #{pregled.showInsertBtn} "  type="button" class="btn-primary btn col-md-12" value="Upiši" action="#{pregled.azurirajParkiraliste()}">
                                <f:ajax execute="id naziv adresa" render="messages selecBoxRaspoloziva selecBoxOdabrana id naziv adresa insertBtn messages"></f:ajax>
                            </h:commandButton>
                        </div>
                    </div>


                    <br></br>
                    <!--dodati h messages  -->

                    <div class="row">
                        <h:messages id = "messages" class="alert alert-info col-md-offset-1 col-md-5 message" globalOnly="true" />
                        <div class="col-md-6">
                            <br></br>
                        </div>
                    </div>

                    <br></br>

                    <div class="row">
                        <div class="col-md-3">
                            <h:selectManyListbox  value="#{pregled.raspolozivaParkiralistaString}" class="form-control" style="vertical-align: top" id="selecBoxRaspoloziva" size="5">

                                <f:selectItems value="#{pregled.raspolozivaParkiralistaIzbornik}" var="k" itemLabel="#{k.labela}" itemValue="#{k.vrijednost}" />

                                <f:ajax event="change" execute="selecBoxRaspoloziva" render="updateBtn" listener="#{pregled.checkNumberSelectedItemInRaspolozivaList()}"></f:ajax>

                            </h:selectManyListbox>
                        </div>
                        <div class="col-md-2">
                            <div class=" col-md-offset-2 col-md-8" style="margin-top: 10px">
                                <h:commandButton type="button" class="btn-primary btn-sm col-md-12" value="Preuzmi" action="#{pregled.dodajOdabrana()}">
                                    <f:ajax execute="selecBoxRaspoloziva " render="selecBoxRaspoloziva selecBoxOdabrana updateBtn forecastBtn"></f:ajax>


                                </h:commandButton>

                            </div>
                            <div class=" col-md-offset-2 col-md-8" style="margin-top: 10px">
                                <h:commandButton type="button" class="btn-primary btn-sm  col-md-12" value="Vrati" action="#{pregled.izbrisiOdabrana()}" >

                                    <f:ajax execute="selecBoxOdabrana" render=" selecBoxRaspoloziva selecBoxOdabrana updateBtn forecastBtn meteoDataTable"></f:ajax>

                                </h:commandButton>

                            </div>
                            <div class="col-md-offset-2 col-md-8" style="margin-top: 10px">
                                <h:commandButton  id="updateBtn"  type="button" class="btn-primary btn-sm col-md-12" style="#{pregled.showUpdateBtn}" value="Ažuriraj" action="#{pregled.getDataForUpdate()}">


                                    <f:ajax execute="selecBoxRaspoloziva" render=" id naziv adresa insertBtn"></f:ajax>

                                </h:commandButton>

                            </div>
                        </div>
                        <div class="col-md-3">
                            <h:selectManyListbox  class="form-control" style="vertical-align: top" id="selecBoxOdabrana" value="#{pregled.odabranaParkiralistaList}" size="5" required="">

                                <f:selectItems value="#{pregled.odabranaParkiralistaIzbornik}" var="k" itemLabel="#{k.labela}"  itemValue="#{k.vrijednost}"/>

                            </h:selectManyListbox>
                        </div>
                        <div class="col-md-4">
                            <br></br>

                            <h:commandButton  id="forecastBtn" style="#{pregled.showForecastBtn}" type="button" class="btn-primary btn-lg" value="#{pregled.forecastBtnValue}" action="#{pregled.getForecastData()}">
                                <f:ajax execute="selecBoxOdabrana" render="messages meteoDataTable forecastBtn"></f:ajax>

                            </h:commandButton>
                        </div>
                    </div>

                    <div class="row col-md-offset-1 col-md-10"> 
                        <h:dataTable  style="#{pregled.showMeteoDatatable}"  id = "meteoDataTable" class="table table-bordered" value="#{pregled.tableMeteoPrognoza}" var="item">

                            <h:column>

                                <f:facet name="header">Parkiralište</f:facet>

                                <h:outputText value="#{pregled.getParkingDataByID(item.id).naziv}">

                                </h:outputText>
                            </h:column>

                            <h:column>

                                <f:facet name="header">Vrijeme</f:facet>

                                <h:outputText value="#{item.date}">
                                    <f:convertDateTime pattern="dd. MM. yyyy HH:mm:ss" />
                                </h:outputText>
                            </h:column>
                            <h:column>
                                <!-- column header -->
                                <f:facet name="header">Tempetatura</f:facet>
                                <!-- row record -->
                                <h:outputText value="#{item.prognoza.temperatureValue} #{item.prognoza.temperatureUnit}"></h:outputText>

                            </h:column>
                            <h:column>
                                <!-- column header -->
                                <f:facet name="header">Tempetatura min</f:facet>
                                <!-- row record -->
                                <h:outputText value="#{item.prognoza.temperatureMin} #{item.prognoza.temperatureUnit}"></h:outputText>

                            </h:column>
                            <h:column>
                                <!-- column header -->
                                <f:facet name="header">Tempetatura max</f:facet>
                                <!-- row record -->
                                <h:outputText value="#{item.prognoza.temperatureMax} #{item.prognoza.temperatureUnit}"></h:outputText>

                            </h:column>
                            <h:column>
                                <!-- column header -->
                                <f:facet name="header">Vlaga</f:facet>
                                <!-- row record -->
                                <h:outputText value="#{item.prognoza.humidityValue} #{item.prognoza.humidityUnit}"></h:outputText>

                            </h:column>
                            <h:column>
                                <!-- column header -->
                                <f:facet name="header">Tlak</f:facet>
                                <!-- row record -->
                                <h:outputText value="#{item.prognoza.pressureValue} #{item.prognoza.pressureUnit}"></h:outputText>

                            </h:column>
                            <h:column>
                                <!-- column header -->
                                <f:facet name="header">Brzina vjetra</f:facet>
                                <!-- row record -->
                                <h:outputText value="#{item.prognoza.windSpeedValue} #{item.prognoza.windSpeedName}"></h:outputText>

                            </h:column>
                            <h:column>
                                <!-- column header -->
                                <f:facet name="header">Smjer vjetra</f:facet>
                                <!-- row record -->
                                <h:outputText value="#{item.prognoza.windDirectionValue} °"></h:outputText>

                            </h:column>


                            <h:column>
                                <!-- column header -->
                                <f:facet name="header">Vrijeme</f:facet>
                                <!-- row record -->
                                <h:outputText value="#{item.prognoza.precipitationMode}"></h:outputText>

                            </h:column>


                            <h:column>
                                <!-- column header -->
                                <f:facet name="header">Preuzeto</f:facet>
                                <!-- row record -->
                                <h:outputText value="#{item.prognoza.lastUpdate}">
                                    <f:convertDateTime pattern="dd. MM. yyyy HH:mm:ss" />
                                </h:outputText>

                            </h:column>




                        </h:dataTable>
                    </div>




                </h:form>






            </ui:define>

        </ui:composition>

    </body>


</html>

